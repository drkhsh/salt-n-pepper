set mbox_type=Maildir
set folder=~/mail
set spoolfile=+/Inbox
set header_cache=~/.cache/mutt

set record=+Sent
set postponed=+Drafts

mailboxes =Inbox =Drafts =Archive =Archives =Sent =Trash =Notes
mailboxes =Lists/OpenBSD =Lists/Tor =Lists/coreboot =Lists/suckless

set realname = 'drkhsh'
set from = user@domain.tld
set use_from = yes
alternates foo@domain.tld|bar@domain.tld

set smtp_pass = XXX
set my_user = user@domain.tld
set smtp_url=smtps://$my_user@domain.tld
set ssl_force_tls = yes
set smtp_authenticators = "login"

set send_charset="utf-8"

set signature="~/.signature"

set mailcap_path   = ~/.mutt/mailcap
alternative_order text/plain text/html

auto_view text/html
macro attach 'V' "<pipe-entry>iconv -c --to-code=UTF8 > ~/.cache/mutt/mail.ht
ml<enter><shell-escape>$BROWSER ~/.cache/mutt/mail.html<enter>"

macro index,pager A "<save-message>=Archive<enter>" "Archive Message"

macro index,pager O "<shell-escape>mbsync -a<enter>" "run mbsync to sync all
mail"

set confirmappend=no
set confirmcreate=yes

set sort=threads
set sort_aux=last-date-received

set sidebar_visible = yes

set mail_check_stats
set sidebar_format = "%B%?F? [%F]?%* %?N?%N?"

set pager_index_lines=10
set pager_stop=yes
set pager_context=3

set sleep_time = 0

bind index,pager \Cp sidebar-prev
# Move the highlight to the next mailbox
bind index,pager \Cn sidebar-next
# Open the highlighted mailbox
bind index,pager \Co sidebar-open

bind index,pager B sidebar-toggle-visible

set sidebar_short_path                  # Shorten mailbox names
set sidebar_delim_chars="/"             # Delete everything up to the last / character
set sidebar_folder_indent               # Indent folders whose names we've shortened
set sidebar_indent_string="  "          # Indent with two spaces

set editor="vim -c ':set tw=72' "
color index green black ~N
color index yellow black ~O

## PGP
# Specify what key to use for signing here:
#set pgp_sign_as=0x
## END PGP

set pgp_use_gpg_agent = no
set crypt_use_gpgme=no

# decode application/pgp
set pgp_decode_command="qubes-gpg-client-wrapper -d --status-fd=2 --batch  %f"

# decrypt/encrypt a pgp/mime attachment
set pgp_decrypt_command="$pgp_decode_command"
set pgp_encrypt_only_command="/usr/libexec/neomutt/pgpewrap gpg2 --trust-model always --batch --quiet --no-verbose --output - --textmode --armor --encrypt -- --recipient %r -- %f"

# verify a pgp/mime signature
set pgp_verify_command="gpg --status-fd=2 --no-verbose --quiet --batch --output - --verify %s %f"

source ~/.neomutt/tokyo-night.colors
